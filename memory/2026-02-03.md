# 2026-02-03 — Mission Control Build Day

## Mission Control Dashboard
- Built complete PWA dashboard for managing Max Umbra from mobile
- Stack: React + Tailwind + Express, dark theme, runs on Pi 3B
- URL: http://192.168.86.40:3847 (LAN) / configured as PWA with manifest

### Features Built
1. **Control page** — collapsible sections with live previews:
   - System panel (RAM, CPU, SD, SSD stats, model selector, restart)
   - Team panel (4 sub-agents: Zury-Legal, Saylor-Strategy, Cobie-Marketing, Johnny-Design)
   - Pendientes synced from HEARTBEAT.md
   - Cron jobs (view, edit, archive)
   - Heartbeat config
   - Tools & Skills inventory
2. **Chat tab** — natural language configuration (type what you want → AI applies to correct file)
3. **Sessions tab** — live session monitoring
4. **Work tab** — tasks/activity view
5. **Config tab** — settings

### Architecture
- Server: `/home/clawdbot/clawd/mission-control/server.js` (Express, port 3847)
- Frontend: `/home/clawdbot/clawd/mission-control/frontend/` (Vite + React)
- Data: `/home/clawdbot/clawd/mission-control/data/` (JSON files: preferences, subagents, skills-status)
- Systemd: `mission-control.service`
- Auth: token-based, stored in localStorage as `mc_token`

### Chat/Preferences System
- User types in Chat → POST /api/preferences → saved to preferences.json
- Server notifies gateway via `sessions_send` to `agent:main:main` session
- Agent reads preference, categorizes, finds target file, applies change, updates status
- Chat polls every 5s for updates

### Design Iterations (with Johnny)
- Multiple rounds of fixing: keyboard overlap, nav placement, bubble sizing
- Johnny's final audit used `visualViewport` API to detect keyboard open/close
- Nav hides with smooth transition when keyboard opens
- Bubbles styled like WhatsApp: rounded-[18px], max-width 85%, proper shadows
- RAM was tight — Vite builds sometimes got SIGKILL'd but completed before kill

### Sub-agents
- **Johnny (Design)** — invoked for UI audits, rewrote Chat.jsx + Layout.jsx
- **Cobie (Marketing)** — drafted X/Twitter thread documenting the build (11 tweets)
- Thread saved to `/home/clawdbot/clawd/mission-control/TWITTER-THREAD.md` — pending Alberto's approval
- Thread needs edits: "no git commits" → "no terminal", remove Cobie's "that's me!" self-reference, tone down "singularity" in tweet 11

### Build Notes
- Vite builds take ~35-50s on Pi, sometimes OOM killed but usually complete
- Must run `sync && echo 3 | sudo tee /proc/sys/vm/drop_caches > /dev/null` before builds
- Copy PWA assets after build: `cp public/{icon-*.png,manifest.json} dist/`
- Gateway sessionKey for notifications: `agent:main:main`

### Pending
- Thread de X pendiente aprobación de Alberto
- Markmap CLI instalado (v0.18.12) — Alberto pidió instalarlo hoy
