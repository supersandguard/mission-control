# 2026-01-31 (Viernes)

## Sand (Transaction Firewall PWA) - Build Session

### Contexto
- Alberto pidió un producto de transaction firewall para Safe multisig
- Originalmente "OasisGuard" → renombrado a **Sand** (sin mencionar Oasis)
- Alberto dio autorización total: "Encárgate de todo en las próximas 7 horas. Tienes dinero y eth para crear smart contracts, wallets, servicios."
- Reunión de puntos críticos a las ~7 AM CST

### Lo que se construyó

**Backend (Express + TypeScript)**
- GET /api/safe/:address/transactions — fetch real pending txs from Safe TX Service
- GET /api/safe/:address/info — Safe configuration (owners, threshold)
- POST /api/simulate — Tenderly simulation (mock + real when API key present)
- POST /api/decode — calldata decoding (ethers.js, Etherscan ABI, 4byte fallback)
- POST /api/explain — human-readable Spanish explanation
- POST /api/risk — risk scoring (green/yellow/red) with 8+ risk rules
- Known protocols registry: Uniswap, Aave, 1inch, Lido, Curve, tokens
- Mock simulations: approve, transfer, swap, ETH transfer

**Frontend (React + Vite + Tailwind PWA)**
- Dashboard: Safe info, balances, pending txs summary
- TX Queue: filterable list with risk badges
- TX Detail: simulation results, decoded params, risk analysis, approve/reject
- Settings: Safe address, chain, policies, API keys
- PWA manifest + service worker
- Dark theme, mobile-first, responsive

**Infraestructura**
- Frontend build en dist/, served via python http.server en port 3000
- Backend compilado con esbuild a dist/server.js (node nativo, sin tsx)
- Accessible via Tailscale: http://100.105.206.114:3000

**Research (RESEARCH.md - 44KB)**
- Safe SDK (Protocol Kit + API Kit) — full code examples
- Tenderly Simulation API (RPC + REST)
- Calldata Decoding pipeline
- Web Push API implementation

### Problemas encontrados
- Pi tiene solo 906MB RAM, Clawdbot Gateway usa ~400MB
- tsx (TypeScript runtime) consume demasiada RAM → OOM kills frecuentes
- Solución: esbuild para compilar a JS, node para ejecutar
- vite build también consume mucha RAM → hay que matar otros procesos primero
- Chromium headless no corre (OOM) → no screenshots

### Para la reunión (7 AM)
- [ ] Demo del frontend (mock data)
- [ ] Explicar arquitectura y qué falta
- [ ] Definir Safe address real de Alberto en Base
- [ ] Obtener API keys (Tenderly, Etherscan/Basescan)
- [ ] Decidir modelo de deployment (¿seguir en Pi? ¿VPS?)
